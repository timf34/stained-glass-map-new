---
/**
 * Homepage - Test with New Layout
 *
 * Testing the BaseLayout and CelticHeader components
 */

import BaseLayout from '../layouts/BaseLayout.astro';
import CelticHeader from '../components/CelticHeader.astro';
import { getCollection } from 'astro:content';

// Load content
const locations = await getCollection('locations');
const artists = await getCollection('artists');
---

<BaseLayout title="Home">
  <CelticHeader />

  <main class="container">
    <div class="main-grid">
      <!-- Sidebar (Placeholder) -->
      <aside class="sidebar">
        <section class="section">
          <h2>Featured Locations</h2>
          <p style="color: var(--color-text-secondary); font-size: 0.9rem;">
            Sidebar will go here
          </p>
        </section>
      </aside>

      <!-- Map Area (Placeholder) -->
      <div class="map-area">
        <div class="map-placeholder">
          <div class="stats-grid">
            <div class="stat-card">
              <strong>{locations.length}</strong>
              <span>Locations</span>
            </div>
            <div class="stat-card">
              <strong>{artists.length}</strong>
              <span>Artists</span>
            </div>
            <div class="stat-card">
              <strong>{locations.reduce((sum, loc) => sum + loc.data.windows.length, 0)}</strong>
              <span>Windows</span>
            </div>
          </div>

          <p style="margin-top: var(--spacing-xl); color: var(--color-text-secondary);">
            âœ… Layout rendering successfully!<br>
            Map component will go here next.
          </p>
        </div>
      </div>
    </div>
  </main>
</BaseLayout>

<style>
  .sidebar {
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: var(--spacing-md);
    height: fit-content;
  }

  .section {
    margin-bottom: var(--spacing-lg);
  }

  .map-area {
    background: var(--color-card-bg);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: var(--spacing-xl);
    min-height: 600px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .map-placeholder {
    text-align: center;
    max-width: 600px;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
  }

  .stat-card {
    background: var(--color-parchment);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: var(--spacing-md);
    text-align: center;
  }

  .stat-card strong {
    display: block;
    font-size: 2.5rem;
    font-family: var(--font-heading);
    color: var(--color-ornament-gold);
    margin-bottom: var(--spacing-xs);
  }

  .stat-card span {
    font-size: 0.9rem;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
</style>
